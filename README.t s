// 等待页面加载完成
WDS.browser.manage().timeouts().pageLoadTimeout(60000);  // 设置页面加载超时为60秒

// 注入 JavaScript 捕获网络请求时间
var script = 
    "var performance = window.performance || window.msPerformance || window.webkitPerformance || {}; " +
    "var entries = performance.getEntries() || []; " +
    "var filteredEntries = entries.filter(entry => entry.name.includes('api/endpoint')); " +
    "return filteredEntries.map(entry => ({ " +
    "    name: entry.name, " +
    "    duration: entry.duration " +
    "}));";

var response = WDS.browser.executeScript(script);

// 记录请求时间
var totalDuration = 0;
if (response && response.length) {
    WDS.log.info("Filtered Entries: " + JSON.stringify(response));
    response.forEach(function(entry) {
        totalDuration += entry.duration;
    });
} else {
    WDS.log.info("No matching entries found or response is empty.");
}
