// 导入必要的类
var { By, until, Builder } = JavaImporter(org.openqa.selenium);
var { Network } = JavaImporter(org.openqa.selenium.devtools.v106.network);
var { Headers } = JavaImporter(org.openqa.selenium.devtools.v106.network.model);

// 启动采样
WDS.sampleResult.sampleStart();

// 获取DevTools对象
var chromeDevTools = WDS.browser.getDevTools();
chromeDevTools.createSession();

// 启用Network域
chromeDevTools.send(Network.enable(null, null, null));

// 导航到目标页面
WDS.browser.get('http://example.com');

// 创建并设置请求头
var headers = new java.util.HashMap();
var auth = 'Bearer ' + vars.get('variable-from-your-csv-file');
headers.put("Authorization", auth);
chromeDevTools.send(Network.setExtraHTTPHeaders(new Headers(headers)));

// 结束采样
WDS.sampleResult.sampleEnd();
